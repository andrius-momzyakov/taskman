{% extends "base.html" %}

{% block title %}Описание задачи{% endblock %}
{% block content %}
<h1>{{ object.subject }}</h1>
<a href="{% url 'edit' object.id %}">Изменить</a>
<p><b>Тип:</b>{{ object.type }}</p>
<p><b>Описание:</b><code><pre>{{ object.desc }}</pre></code></p>
<p><b>Заявитель:</b>{{ object.created_by }}</p>
<p><b>Исполнитель:</b>{{ object.executor|default_if_none:"" }}</p>
<p><b>Крайний срок:</b>{{ object.deadline_date|default_if_none:"" }}</p>
<p><b>Проект:</b>{{ object.project|default_if_none:"" }}</p>
<p><b>Модуль:</b>{{ object.module|default_if_none:"" }}</p>
<p><b>Статус:</b>{{ object.get_status_literal|default_if_none:"" }}</p>
<p><b>Закрыто:</b>{{ object.closed|default_if_none:"" }}</p>
{% if object.parent %}
<p><b>Родительская задача:</b><a href="{% url 'detail' object.parent.id %}">{{ object.parent.subject }}</a></p>
{% endif %}

{% if children %}
<h2>Подзадачи</h2>
{% for child in children %}
<p><a href="/task/detail/{{ child.id }}/">{{ child }}</a></p>
{% endfor%}
{% endif %}

{% if attachments %}
<h2>Присоединенные файлы:</h2>
{% endif %}
{% for attachment in attachments %}
<p><a href="{{ MEDIA_URL }}{{ attachment.file.name }}">{{ attachment.file.name }}</a></p>
{% endfor %}

{% if comments %}
<h2>Комментарии:</h2>
<table>
{% for comment in comments%}

    <tr>
        <td>{{ comment.author }}</td>
        <td>{{ comment.created }}</td>
        <td><pre>{{ comment.body }}</pre></td>
</tr>
    {% endfor %}
</table>
    {% endif %}
{% endblock %}